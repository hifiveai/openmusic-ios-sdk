# 《播放器UI和音乐列表UI》接口文档
[TOC]
## 初始化SDK

调用如下API进行SDK初始化操作，clientId为用户唯一标识（公司自有的用户ID），请在获取到用户ID之后调用

```objc 

    [[HFOpenApiManager shared] registerAppWithAppId:@"appId" serverCode:@"serverCode" clientId:@"clientId" version:@"version" success:^(id  _Nullable response) {
        //注册成功
    } fail:^(NSError * _Nullable error) {
        //注册失败
    }];

```
| 参数 | 必填 | 描述 |
|---|---|---|
| appId | 是 | 开放平台申请appId |
| serverCode | 是 | 开放平台申请serverCode |
| clientId | 是 | 用户唯一标识（公司自有的用户ID） |
| version | 是 | 操作的 API 的版本，如：V4.1.1 |


## 用户登录
调用如下API，HIFIVE平台将会为该用户进行授权，以便使用后续API
后续部分API需要用户登录

```objc 
[[HFOpenApiManager shared] baseLoginWithNickname:@"nickname" gender:@"gender" birthday:@"birthday" location:@"location" education:@"education" profession:@"profession" isOrganization:true reserve:@"reserve" favoriteSinger:@"favoriteSinger" favoriteGenre:@"favoriteGenre" success:^(id  _Nullable response) {
    //登录成功
} fail:^(NSError * _Nullable error) {
    //登录失败
}];

```
- 请求参数
| 参数           | 必填 | 描述                                        | 可选值             | 示例                   |      |
| -------------- | ---- | ------------------------------------------- | ------------------ | ---------------------- | ---- |
| nickname       | 否   | 昵称                                        | -                  | -                      |      |
| gender         | 否   | 性别，默认0                                 | 0:未知,1:男,2:女   | -                      |      |
| birthday       | 否   | 出生日期，10位秒级时间戳                    | -                  | 1594639058             |      |
| location       | 否   | 经纬度信息，纬度在前                        | -                  | 30.779164,103.94547    |      |
| education      | 否   | 所受教育水平                                | 详见[教育水平定义] | 0                      |      |
| profession     | 否   | 职业                                        | 详见[用户职业定义] | 0                      |      |
| isOrganization | 否   | 是否属于组织机构类型用户（to B），默认false | true/false         | false                  |      |
| reserve        | 否   | json字符串，保留字段用于扩展用户其他信息    | -                  | {"language":"English"} |      |
| favoriteSinger | 否   | 喜欢的歌手名，多个用英文逗号隔开            | -                  | Queen,The Beatles      |      |
| favoriteGenre  | 否   | 喜欢的音乐流派Id，多个用英文逗号拼接        | -                  | 7,8,10                 |      |
| success | 否 | 成功 | - | - | |
| fail | 否 | 失败 | - | - | |


## 初始化
```objc
-(instancetype)initWithListenType:(NSUInteger)type config:(HFOpenMusicPlayerConfiguration *_Nonnull)config;
```
| 参数 | 必填 | 描述 | 可选值 |
|---|---|---|---|
| type | 是 | 音乐授权类型 | 详见[音乐授权类型] |
| config | 是 | 配置 | 详见[配置] |

**音乐授权类型**

| 名称                  | 值      |      |
| --------------------- | ------- | ---- |
| BGM音乐播放           | TYPE_TRAFFIC |      |
| 音视频作品BGM音乐播放 | TYPE_UGC     |      |
| K歌音乐播放           | KTYPE_K      |      |

**配置**

- 创建默认配置
```objc
HFOpenMusicPlayerConfiguration *config = [HFOpenMusicPlayerConfiguration defaultConfiguration];
```
| 配置项 | 描述 | 默认值 | 类型 |
|---|---|---|---|
| autoNext | 自动播放下一首 | 默认开启 | BOOL |
| panTopLimit | 播放器视图可拖拽范围，距离顶部距离 | 0 | NSUInteger |
| panBottomLimit | 播放器视图可拖拽范围，距离底部距离 | 0 | NSUInteger |
| cacheEnable | 是否允许客户端缓存 | 默认关闭 | BOOL |
| bufferCacheSize | 缓冲区大小 | 默认270 (单位kb)，最小配置270kb | NSUInteger |
| repeatPlay | 是否允许重复播放 | 默认关闭 | BOOL |
| networkAbilityEable | 是否开启网络监测,断线重连播放 | 默认开启 | BOOL |
| rate | 播放速率 | 默认1.0 | float |


```objc
//获取默认配置
HFOpenMusicPlayerConfiguration *config = [HFOpenMusicPlayerConfiguration defaultConfiguration];
//用户可通过自己需求在默认配置上进行个性化配置
config.networkAbilityEable = true;
config.cacheEnable = true;
config.bufferCacheSize = 350;
config.panTopLimit = 100;
config.panBottomLimit = 50;
HFOpenMusicPlayer *playerListView = [[HFOpenMusicPlayer alloc] initWithListenType:TYPE_TRAFFIC config:config];
```
## 更新配置项
```objc
-(void)setConfig:(HFOpenMusicPlayerConfiguration *)config;
```


```objc
HFOpenMusicPlayerConfiguration *newConfig = [HFOpenMusicPlayerConfiguration defaultConfiguration];
config.cacheEnable = false;
playerListView.config = newConfig;
```
## 添加播放器UI视图

```objc
-(void)addMusicPlayerView;
```

## 移除播放器UI视图

```objc
-(void)removeMusicPlayerView;
```
